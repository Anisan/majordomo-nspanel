<!-- Table 'ns_panels' edit -->
<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" class="form-horizontal">
[#if OK#]
<div class="alert alert-success"><#LANG_DATA_SAVED#></div>
[#endif OK#]
[#if ERR#]
<div class="alert alert-danger"><#LANG_FILLOUT_REQURED#></div>
[#endif ERR#]
<fieldset>
<!-- PANEL_CONFIG (varchar) -->
<div class="form-group[#if ERR_PANEL_CONFIG#] has-error[#endif#]">
 <div class="col-lg-12">
  <div id='editor_holder'></div>
  <textarea id="panel_config" name="panel_config" rows="15" class="form-control">[#PANEL_CONFIG#]</textarea>
 </div>
</div>
<div class="form-group">
        <div class="col-lg-offset-3 col-lg-4">
 <button type="submit" name="subm" id="submit" value="Submit" class="btn btn-primary"><#LANG_SUBMIT#></button>
 <a href="?" class="btn btn-default "><#LANG_CANCEL#></a>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <a href="?load_demo=1&view_mode=<#VIEW_MODE#>&id=<#ID#>&tab=<#TAB#>" class="btn btn-default" onclick="return confirm('Are you sure? Please confirm.');">Set Demo config</a>
<input type="hidden" name="id" value="<#ID#>">
<input type="hidden" name="view_mode" value="<#VIEW_MODE#>">
<input type="hidden" name="edit_mode" value="<#EDIT_MODE#>">
<input type="hidden" name="tab" value="<#TAB#>">
<input type="hidden" name="mode" value="update">
        </div>
</div>
</fieldset>
</form>

<!--#
<script src="https://cdn.jsdelivr.net/npm/@json-editor/json-editor@latest/dist/jsoneditor.min.js"></script>
<script type="text/javascript">
 JSONEditor.defaults.theme = 'bootstrap3';
 JSONEditor.defaults.iconlib = 'bootstrap3';

 var starting_schema = {
  type: "object",
  title: "Panel Config",
  properties: {
   make: {
    title: "Make",
    type: "string",
    enum: [
     "Toyota",
     "BMW",
     "Honda",
     "Ford",
     "Chevy",
     "VW"
    ]
   },
   model: {
    type: "string"
   },
   year: {
    type: "integer",
    enum: [
     1995,1996,1997,1998,1999,
     2000,2001,2002,2003,2004,
     2005,2006,2007,2008,2009,
     2010,2011,2012,2013,2014
    ],
    default: 2008
   },
  }
 };

 var starting_value = {};
 var currentValue = $('#panel_config').val();
 if (currentValue!="") {
  starting_value = JSON.parse(currentValue);
 }


 // Initialize the editor with a JSON schema
 var editor = new JSONEditor(document.getElementById('editor_holder'),{
  schema: starting_schema,
  startval: starting_value,
  no_additional_properties: true,
  required_by_default: true
 });
 //editor.setValue(starting_value, true);

 // Hook up the submit button to log to the console
 document.getElementById('submit').addEventListener('click',function() {
  // Get the value from the editor
  $('#panel_config').val(JSON.stringify(editor.getValue()));
 });

</script>
#-->